FROM node:22-slim

WORKDIR /app

# Copy package files and install dependencies
COPY mcp/package*.json ./
RUN npm ci --omit=dev

# Copy compiled code
COPY mcp/dist ./dist

# Copy data files
COPY json/playlists.json ./data/
COPY web/public/artist-bios.json ./data/
COPY web/public/spotify-index.json ./data/

# MCP servers communicate via stdio
CMD ["node", "dist/index.js"]
